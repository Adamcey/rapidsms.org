{% extends "base.html" %}

{% block title %}Search{% endblock title %}

{% block content %}
<div class="page-header">
    <h1>Search</h1>
</div>

<form method="get" action=".">
        {{ form.as_p }}
        <input type="submit" value="Search">
</form>

<!-- Begin faceting. -->
{% for field, facets in facets.fields.items %}
<div>
    <dl>
        {% if facets %}
            {% if field == 'creator' %}
                <dt>Author</dt>
            {% elif field == 'countries' %}
                <dt>Countries</dt>
            {% elif field == 'pkg_type' %}
                <dt>Package Type</dt>
            {% elif field == 'model' %}
                <dt>Type</dt>
            {% endif %}
            {% for facet in facets %}
                <dd><a href="{{ request.get_full_path }}&amp;selected_facets={{ field }}_exact:{{ facet.0|urlencode }}">{{ facet.0 }}</a> ({{ facet.1 }})</dd>
            {% endfor %}
        {% endif %}
    </dl>
</div>
{% endfor %}
<!-- End faceting -->

{% if query %}
    <h3>Results</h3>

    {% for result in page.object_list %}
        <p><a href="{{ result.object.get_absolute_url }}">{{ result.object.name }}</a></p>
    {% empty %}
        <p>No results found.</p>
    {% endfor %}

    {% if page.has_previous or page.has_next %}
        <div>
            {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
            |
            {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
        </div>
    {% endif %}
{% else %}
    {# Show some example queries to run, maybe query syntax, something else? #}
{% endif %}
{% endblock %}
